subprojects {
    apply plugin: 'java'
    group = 'net.quasardb.qdb'
    version = '2.0'
    repositories {
        mavenCentral()
    }
}

project(':qdb-api-java') {
    jar {
        from {[
            // Windows
            "../qdb/bin/qdb_api.dll",
            "../qdb/bin/qdb_api_jni.dll",

            // OS X
            "../qdb/lib/libqdb_api.dylib",
            "../qdb/lib/libqdb_api_jni.jnilib",

            // FreeBSD and Linux
            "../qdb/lib/libqdb_api.so",
            "../qdb/lib/libqdb_api_jni.so"
        ]}
    }
    sourceSets {
        main {
            java {
                srcDir 'src/java'
                srcDir '../qdb/jni'
            }
        }
    }
}

project(':qdb-api-java-tests') {
    dependencies {
        compile project(':qdb-api-java')
        compile group: 'junit', name: 'junit', version: '4.+'
        compile group: 'org.codehaus.jackson', name: 'jackson-jaxrs', version: '1.9.+'
    }
    test {
        systemProperty "qdbd.path", project.getProperty("qdbd.path")   
    }
}